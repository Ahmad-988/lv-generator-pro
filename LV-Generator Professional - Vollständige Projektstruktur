# LV-Generator Professional - VollstÃ¤ndige Projektstruktur

## ğŸ“ Projektstruktur

```
lv-generator-pro/
â”‚
â”œâ”€â”€ ğŸ“ frontend/                    # React TypeScript Frontend
â”‚   â”œâ”€â”€ ğŸ“ src/
â”‚   â”‚   â”œâ”€â”€ ğŸ“ components/         # UI-Komponenten
â”‚   â”‚   â”‚   â”œâ”€â”€ Layout.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ ProjectList.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ TenderAnalyzer.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ LVEditor.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ PriceCalculator.tsx
â”‚   â”‚   â”‚   â””â”€â”€ ExportManager.tsx
â”‚   â”‚   â”œâ”€â”€ ğŸ“ hooks/              # Custom React Hooks
â”‚   â”‚   â”‚   â”œâ”€â”€ useAPI.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ useAuth.ts
â”‚   â”‚   â”‚   â””â”€â”€ useWebSocket.ts
â”‚   â”‚   â”œâ”€â”€ ğŸ“ services/           # API-Services
â”‚   â”‚   â”‚   â”œâ”€â”€ api.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.ts
â”‚   â”‚   â”‚   â””â”€â”€ export.ts
â”‚   â”‚   â”œâ”€â”€ ğŸ“ types/              # TypeScript Definitionen
â”‚   â”‚   â”œâ”€â”€ ğŸ“ utils/              # Hilfsfunktionen
â”‚   â”‚   â””â”€â”€ App.tsx
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ tsconfig.json
â”‚
â”œâ”€â”€ ğŸ“ backend/                     # Node.js Express Backend
â”‚   â”œâ”€â”€ ğŸ“ src/
â”‚   â”‚   â”œâ”€â”€ ğŸ“ controllers/        # Request Handler
â”‚   â”‚   â”‚   â”œâ”€â”€ projectController.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ analysisController.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ priceController.ts
â”‚   â”‚   â”‚   â””â”€â”€ exportController.ts
â”‚   â”‚   â”œâ”€â”€ ğŸ“ services/           # Business Logic
â”‚   â”‚   â”‚   â”œâ”€â”€ aiService.ts      # KI-Integration
â”‚   â”‚   â”‚   â”œâ”€â”€ scraperService.ts # Web-Scraping
â”‚   â”‚   â”‚   â”œâ”€â”€ priceService.ts   # Preiskalkulation
â”‚   â”‚   â”‚   â””â”€â”€ gaebService.ts    # GAEB-Verarbeitung
â”‚   â”‚   â”œâ”€â”€ ğŸ“ models/             # Datenmodelle
â”‚   â”‚   â”œâ”€â”€ ğŸ“ routes/             # API-Routen
â”‚   â”‚   â”œâ”€â”€ ğŸ“ middleware/         # Express Middleware
â”‚   â”‚   â””â”€â”€ server.ts
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ tsconfig.json
â”‚
â”œâ”€â”€ ğŸ“ database/                    # Datenbank-Setup
â”‚   â”œâ”€â”€ ğŸ“ migrations/             # DB-Migrationen
â”‚   â”œâ”€â”€ ğŸ“ seeds/                  # Testdaten
â”‚   â””â”€â”€ schema.sql                 # Datenbankschema
â”‚
â”œâ”€â”€ ğŸ“ scraper/                     # Web-Scraping Module
â”‚   â”œâ”€â”€ ğŸ“ parsers/                # Portal-spezifische Parser
â”‚   â”‚   â”œâ”€â”€ evergabe.ts
â”‚   â”‚   â”œâ”€â”€ ted.ts
â”‚   â”‚   â””â”€â”€ vergabe24.ts
â”‚   â””â”€â”€ index.ts
â”‚
â”œâ”€â”€ ğŸ“ ai-models/                   # KI-Konfiguration
â”‚   â”œâ”€â”€ ğŸ“ prompts/                # Optimierte Prompts
â”‚   â”œâ”€â”€ ğŸ“ fine-tuning/            # Fine-Tuning Daten
â”‚   â””â”€â”€ config.ts
â”‚
â”œâ”€â”€ ğŸ“ docker/                      # Container-Setup
â”‚   â”œâ”€â”€ Dockerfile.frontend
â”‚   â”œâ”€â”€ Dockerfile.backend
â”‚   â””â”€â”€ docker-compose.yml
â”‚
â”œâ”€â”€ ğŸ“ tests/                       # Automatisierte Tests
â”‚   â”œâ”€â”€ ğŸ“ unit/
â”‚   â”œâ”€â”€ ğŸ“ integration/
â”‚   â””â”€â”€ ğŸ“ e2e/
â”‚
â”œâ”€â”€ ğŸ“ docs/                        # Dokumentation
â”‚   â”œâ”€â”€ API.md
â”‚   â”œâ”€â”€ SETUP.md
â”‚   â””â”€â”€ USER_GUIDE.md
â”‚
â”œâ”€â”€ .env.example                    # Umgebungsvariablen-Vorlage
â”œâ”€â”€ .gitignore
â”œâ”€â”€ README.md
â””â”€â”€ package.json                    # Root package.json

```

## ğŸ› ï¸ Technologie-Stack

### Frontend
- **Framework**: React 18 mit TypeScript
- **UI-Library**: Tailwind CSS + Headless UI
- **State Management**: Zustand
- **API-Client**: Axios mit React Query
- **Charts**: Recharts
- **PDF-Generation**: jsPDF
- **Excel**: SheetJS

### Backend
- **Runtime**: Node.js 20 LTS
- **Framework**: Express.js mit TypeScript
- **ORM**: Prisma
- **Authentifizierung**: JWT + Passport.js
- **API-Dokumentation**: Swagger/OpenAPI
- **Queue**: Bull mit Redis
- **WebSockets**: Socket.io

### Datenbank & Storage
- **Hauptdatenbank**: PostgreSQL 15
- **Cache**: Redis
- **Dateispeicher**: MinIO (S3-kompatibel)
- **Suchindex**: Elasticsearch (optional)

### KI & External Services
- **LLM**: OpenAI GPT-4 / Anthropic Claude
- **OCR**: Tesseract.js
- **Web Scraping**: Puppeteer + Cheerio
- **Email**: SendGrid
- **Monitoring**: Sentry

### DevOps
- **Container**: Docker + Docker Compose
- **CI/CD**: GitHub Actions
- **Hosting**: Railway/Render (Backend), Vercel (Frontend)
- **Monitoring**: Grafana + Prometheus

## ğŸš€ Setup-Anleitung

### 1. Repository klonen und AbhÃ¤ngigkeiten installieren

```bash
# Repository klonen
git clone https://github.com/IhrName/lv-generator-pro.git
cd lv-generator-pro

# Root-AbhÃ¤ngigkeiten installieren
npm install

# Frontend-AbhÃ¤ngigkeiten
cd frontend && npm install

# Backend-AbhÃ¤ngigkeiten
cd ../backend && npm install
```

### 2. Umgebungsvariablen konfigurieren

```bash
# .env Datei erstellen
cp .env.example .env

# Folgende Variablen ausfÃ¼llen:
DATABASE_URL=postgresql://user:password@localhost:5432/lv_generator
REDIS_URL=redis://localhost:6379
OPENAI_API_KEY=sk-...
JWT_SECRET=your-secret-key
FRONTEND_URL=http://localhost:3000
BACKEND_URL=http://localhost:3001
```

### 3. Datenbank einrichten

```bash
# PostgreSQL starten (Docker)
docker-compose up -d postgres redis

# Migrationen ausfÃ¼hren
cd backend
npx prisma migrate dev

# Seed-Daten laden
npx prisma db seed
```

### 4. Entwicklungsserver starten

```bash
# Terminal 1: Backend
cd backend
npm run dev

# Terminal 2: Frontend
cd frontend
npm run dev

# Terminal 3: Worker (fÃ¼r Background-Jobs)
cd backend
npm run worker
```

## ğŸ“Š Datenbankschema

```sql
-- Haupttabellen
CREATE TABLE users (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    email VARCHAR(255) UNIQUE NOT NULL,
    password_hash VARCHAR(255) NOT NULL,
    company_name VARCHAR(255),
    role VARCHAR(50) DEFAULT 'user',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE projects (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID REFERENCES users(id),
    name VARCHAR(255) NOT NULL,
    tender_url TEXT,
    tender_number VARCHAR(100),
    location VARCHAR(255),
    timeframe VARCHAR(255),
    status VARCHAR(50) DEFAULT 'draft',
    metadata JSONB,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE lv_positions (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    project_id UUID REFERENCES projects(id),
    position_number VARCHAR(50),
    short_description VARCHAR(255),
    long_description TEXT,
    quantity DECIMAL(10,2),
    unit VARCHAR(50),
    unit_price DECIMAL(10,2),
    total_price DECIMAL(12,2),
    trade VARCHAR(100),
    confidence_score DECIMAL(3,2),
    metadata JSONB,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE price_history (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    position_type VARCHAR(255),
    description TEXT,
    region VARCHAR(100),
    price DECIMAL(10,2),
    currency VARCHAR(3) DEFAULT 'EUR',
    source VARCHAR(100),
    recorded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Indizes fÃ¼r Performance
CREATE INDEX idx_projects_user_id ON projects(user_id);
CREATE INDEX idx_lv_positions_project_id ON lv_positions(project_id);
CREATE INDEX idx_price_history_region ON price_history(region);
CREATE INDEX idx_price_history_position_type ON price_history(position_type);
```

## ğŸ”§ Konfigurationsdateien

### docker-compose.yml
```yaml
version: '3.8'

services:
  postgres:
    image: postgres:15-alpine
    environment:
      POSTGRES_DB: lv_generator
      POSTGRES_USER: admin
      POSTGRES_PASSWORD: secret
    volumes:
      - postgres_data:/var/lib/postgresql/data
    ports:
      - "5432:5432"

  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"

  minio:
    image: minio/minio
    command: server /data --console-address ":9001"
    environment:
      MINIO_ROOT_USER: minioadmin
      MINIO_ROOT_PASSWORD: minioadmin
    volumes:
      - minio_data:/data
    ports:
      - "9000:9000"
      - "9001:9001"

volumes:
  postgres_data:
  minio_data:
```

### package.json (Root)
```json
{
  "name": "lv-generator-pro",
  "version": "1.0.0",
  "private": true,
  "workspaces": [
    "frontend",
    "backend"
  ],
  "scripts": {
    "dev": "concurrently \"npm run dev:backend\" \"npm run dev:frontend\"",
    "dev:backend": "cd backend && npm run dev",
    "dev:frontend": "cd frontend && npm run dev",
    "build": "npm run build:backend && npm run build:frontend",
    "build:backend": "cd backend && npm run build",
    "build:frontend": "cd frontend && npm run build",
    "test": "npm run test:backend && npm run test:frontend",
    "docker:up": "docker-compose up -d",
    "docker:down": "docker-compose down"
  },
  "devDependencies": {
    "concurrently": "^8.2.0"
  }
}
```

## ğŸ¯ NÃ¤chste Schritte

1. **Basis-Setup durchfÃ¼hren** (30 Minuten)
2. **Datenbank einrichten** (15 Minuten)
3. **Erste API-Endpoints implementieren** (2-3 Stunden)
4. **Frontend-GrundgerÃ¼st erstellen** (2-3 Stunden)
5. **KI-Integration testen** (1-2 Stunden)
6. **Web-Scraping implementieren** (1 Tag)
7. **Preiskalkulation entwickeln** (2-3 Tage)
8. **Export-Funktionen** (2 Tage)
9. **Testing & Debugging** (fortlaufend)
10. **Deployment vorbereiten** (1 Tag)
